<%= render 'shared/errors', obj: @agent %>
<div class="row">
  <div class="col-xs-12">
    <%= form_for(@agent, :html => {class: "form-horizontal", role: "form"}) do |a| %>
        <div class="form-group">
          <div class="control-label col-sm-2">
            <%= a.label :name %>
          </div>
          <div class="col-sm-8">
            <%= a.text_field :name, class: "form-control", placeholder: "name of agent", autofocus: true %>
          </div>
        </div>
        <div class="form-group">
          <div class="control-label col-sm-2">
            <%= a.label :state_id, "State or Territory" %>
          </div>
          <div class="col-sm-8">
            <%= a.collection_select :state_id, State.order(:state_name), :id, :state_name, include_blank: true %>
          </div>
        </div>
        <div class="form-group">
          <div class="control-label col-sm-2">
            <%= a.label :suburb_id %>
          </div>
          <div class="col-sm-8">
            <%= a.grouped_collection_select :suburb_id, State.order(:state_name), :suburbs_by_name, :state_name, :id, :suburb_name, include_blank: true %>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <%= a.submit class: 'btn btn-primary btn-lg' %>
          </div>
        </div>
    <% end %>

    <div class="col-xs-4 col-xs-offset-4">
      [ <%= link_to "Cancel request and return to agents listing", agents_path %> ]
    </div>

  </div>
</div>

<script>
    $(function () {
        filterSuburbsList();
    });
</script>